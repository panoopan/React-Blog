(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{35:function(n,e,t){"use strict";t.r(e);var a=t(2),c=t(0),r=t(19),i=t.n(r),o=t(4),s=t(3),d=t(6),b=t(5),u=Object(c.createContext)(null),j=Object(c.createContext)(null),l=Object(c.createContext)(null),p="token",h=function(n){return localStorage.setItem(p,n)},x=function(){return localStorage.getItem(p)},O="https://student-json-api.lidemy.me",f=function(n){return fetch("".concat(O,"/posts/").concat(n,"?_expand=user")).then((function(n){return n.json()}))},m=function(){var n=x();return fetch("".concat(O,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))};var g,v,w,k,y,S=function(){var n=Object(c.useContext)(u).setUser,e=Object(c.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(c.useState)("Lidemy"),s=Object(o.a)(i,2),d=s[0],j=s[1],l=Object(c.useState)(),p=Object(o.a)(l,2),x=p[0],f=p[1],g=Object(c.useState)(!1),v=Object(o.a)(g,2),w=v[0],k=v[1],y=Object(b.f)(),S=Object(b.i)(),C=Object(c.useCallback)((function(n){r(n.target.value)}),[]),I=Object(c.useCallback)((function(n){j(n.target.value)}),[]);return{username:a,password:d,errorMessage:x,handleSubmit:function(e){e.preventDefault(),f(null),w||(k(!0),function(n,e){return fetch("".concat(O,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:e})}).then((function(n){return n.json()}))}(a,d).then((function(e){if(k(!1),0===e.ok)return f(e.message);h(e.token),m().then((function(e){if(1!==e.ok)return h(null),f(e.message);n(e.data),y.push("/")}))})))},handleUsernameInput:C,handlePasswordInput:I,handleLogout:function(){h(""),n(null),"/"!==S.path&&y.push("/")}}},C=t(1),I=s.b.div(g||(g=Object(a.a)(["\n  display: flex;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  background: white;\n  z-index: 2;\n\n  @media screen and (max-width: 768px) {\n    flex-direction: column;\n    justify-content: center;\n  }\n"]))),z=Object(s.b)(d.b)(v||(v=Object(a.a)(["\n  font-size: 26px;\n  font-wight: bold;\n  color: black;\n  text-decoration: none;\n  padding: 0 12px;\n  flex-shrink: 0;\n\n  span {\n    color: #fc633a;\n  }\n\n  @media screen and (max-width: 768px) {\n    padding: 12px 0;\n  }\n"]))),B=s.b.div(w||(w=Object(a.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  flex-wrap: wrap;\n\n  @media screen and (max-width: 576px) {\n    justify-content: center;\n  }\n"]))),P=s.b.div(k||(k=Object(a.a)(["\n  display: flex;\n  justify-content: center;\n"]))),L=Object(s.b)(d.b)(y||(y=Object(a.a)(["\n  text-decoration: none;\n  color: black;\n  font-size: 18px;\n  padding: 12px;\n\n  &:hover {\n    background: #fc633a;\n    color: white;\n  }\n\n  ","\n"])),(function(n){return n.$active&&"\n    background: #fc633a;\n    color: white;\n\n  "}));var M,E,N,T,U,_,D,A=function(){var n=Object(b.g)(),e=Object(c.useContext)(u).user,t=Object(c.useContext)(j).isLoading,a=S().handleLogout;return Object(C.jsxs)(I,{children:[Object(C.jsxs)(z,{to:"/",children:[Object(C.jsx)("span",{children:"Orange"})," & Black"]}),Object(C.jsxs)(B,{children:[Object(C.jsxs)(P,{children:[Object(C.jsx)(L,{to:"/",$active:"/"===n.pathname,children:"Home"}),Object(C.jsx)(L,{to:"/about",$active:"/about"===n.pathname,children:"About"}),e&&Object(C.jsx)(L,{to:"/admin",$active:"/admin"===n.pathname,children:"Admin"})]}),!t&&Object(C.jsxs)(P,{children:[!e&&Object(C.jsx)(L,{to:"/login",$active:"/login"===n.pathname,children:"Login"}),!e&&Object(C.jsx)(L,{to:"/register",$active:"/register"===n.pathname,children:"Sign Up"}),e&&Object(C.jsx)(L,{to:"",onClick:a,children:"Lougout"})]})]})]})},J=s.b.div(M||(M=Object(a.a)(["\n  border-bottom: 1px solid #ff8100;\n  padding: 16px;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n\n  div {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    word-break: break-all;\n  }\n\n  &:hover {\n    background: #ff81003b;\n  }\n"]))),$=s.b.div(E||(E=Object(a.a)([""]))),F=Object(s.b)(d.b)(N||(N=Object(a.a)(["\n  font-size: 20px;\n  color: white;\n  text-decoration: none;\n"]))),q=s.b.div(T||(T=Object(a.a)(["\n  margin: 12px 0;\n  font-size: 16px;\n"]))),H=Object(s.b)(d.b)(U||(U=Object(a.a)(["\n  color: #ff8100;\n  font-size: 18px;\n"]))),W=s.b.div(_||(_=Object(a.a)(["\n  flex-shrink: 0;\n"]))),G=s.b.button(D||(D=Object(a.a)(["\n  padding: 8px 4px;\n  background: transparent;\n  color: white;\n  border: solid 1px #ff8100;\n  cursor: pointer;\n\n  &:hover {\n    background: #ff8100;\n  }\n\n  & + & {\n    margin-left: 5px;\n  }\n"])));function K(n){var e=n.post,t=Object(b.f)(),a=Object(b.g)();return Object(C.jsxs)(J,{children:[Object(C.jsxs)($,{children:[Object(C.jsx)(F,{to:"/post/".concat(e.id),children:e.title}),Object(C.jsxs)(q,{children:["posted by","   ",Object(C.jsx)(H,{to:"/author/".concat(e.user.id),children:e.user.nickname}),"   ","|"," ",new Date(e.createdAt).toLocaleString("en",{hour12:!1})]})]}),"/admin"===a.pathname&&Object(C.jsxs)(W,{children:[Object(C.jsx)(G,{onClick:function(){var n;n=e.id,fetch("".concat(O,"/posts/").concat(n),{method:"DELETE"}).then((function(n){return n.json()}))},children:"Delete"})," ",Object(C.jsx)(G,{onClick:function(){t.push("/edit-post/".concat(e.id))},children:"Edit"})]})]})}var Q,R,V,X=Object(c.memo)(K),Y=s.b.div(Q||(Q=Object(a.a)(["\n  text-align: center;\n"]))),Z=s.b.button(R||(R=Object(a.a)(["\n  padding: 12px;\n  background: transparent;\n  color: white;\n  border: solid 1px #ff8100;\n  cursor: pointer;\n\n  &:hover {\n    background: #ff8100;\n  }\n\n  & + & {\n    margin-left: 5px;\n  }\n"]))),nn=s.b.div(V||(V=Object(a.a)(["\n  display: inline-block;\n  margin: 0 20px;\n  background: #ff8100;\n  width: 25px;\n  height: 25px;\n  text-align: center;\n  border-radius: 50%;\n  color: white;\n"])));function en(n){var e=n.page,t=n.handleButtonClick;return Object(C.jsxs)(Y,{children:[Object(C.jsx)(Z,{onClick:function(){t("First")},children:"First"}),Object(C.jsx)(Z,{onClick:function(){t("Prev")},children:"Prev"}),Object(C.jsx)(nn,{children:e}),Object(C.jsx)(Z,{onClick:function(){t("Next")},children:"Next"}),Object(C.jsx)(Z,{onClick:function(){t("Last")},children:"Last"})]})}var tn=Object(c.memo)(en);var an=function(){var n=Object(c.useState)([]),e=Object(o.a)(n,2),t=e[0],a=e[1],r=Object(c.useState)([]),i=Object(o.a)(r,2),s=i[0],d=i[1],j=Object(c.useContext)(u).user,p=Object(c.useContext)(l).page,h=Object(b.f)(),x=Object(b.i)(),m=Object(b.h)().id,g=Object(c.useState)(),v=Object(o.a)(g,2),w=v[0],k=v[1];return Object(c.useEffect)((function(){"/admin"===x.path&&(j?function(n){return fetch("".concat(O,"/posts?userId=").concat(n.id,"&_expand=user&_sort=createdAt&_order=desc")).then((function(n){return n.json()}))}(j).then((function(n){d(n)})):h.push("/"))}),[x,j,s,h]),Object(c.useEffect)((function(){"/"===x.path&&function(n){return fetch("".concat(O,"/posts?_expand=user&_sort=createdAt&_order=desc&_page=").concat(n,"&_limit=5")).then((function(n){return n.json()}))}(p).then((function(n){d(n)}))}),[x,p]),Object(c.useEffect)((function(){"/author/:id"===x.path&&function(n){return fetch("".concat(O,"/posts?userId=").concat(n,"&_expand=user&_sort=createdAt&_order=desc")).then((function(n){return n.json()}))}(m).then((function(n){d(n),k(n[0].user.nickname)}))}),[x,m]),Object(c.useEffect)((function(){"/post/:id"===x.path&&f(m).then((function(n){a(n)}))}),[x,m]),{post:t,posts:s,author:w}};var cn,rn,on=function(){var n=Object(c.useState)(),e=Object(o.a)(n,2),t=e[0],a=e[1],r=Object(c.useContext)(l),i=r.page,s=r.setPage;return Object(c.useEffect)((function(){fetch("".concat(O,"/posts")).then((function(n){return n.json()})).then((function(n){var e=Number(n.length);a(Math.ceil(e/5))}))}),[t]),{handleButtonClick:Object(c.useCallback)((function(n){return"First"===n?s(1):"Prev"===n&&i>1?s(i-1):"Next"===n&&i<t?s(i+1):"Last"===n?s(t):void 0}),[i,s,t])}},sn=s.b.div(cn||(cn=Object(a.a)([""]))),dn=s.b.div(rn||(rn=Object(a.a)(["\n  width: 60%;\n  margin: 60px auto;\n  max-height: 80vh;\n  overflow: scroll;\n\n  @media screen and (max-width: 768px) {\n    margin: 100px auto 60px auto;\n    width: 80%;\n  }\n"])));var bn,un,jn,ln,pn,hn,xn,On=function(){var n=an().posts,e=on().handleButtonClick,t=Object(c.useContext)(l).page;return Object(C.jsxs)(sn,{children:[Object(C.jsx)(dn,{children:n.map((function(n){return Object(C.jsx)(X,{post:n},n.id)}))}),Object(C.jsx)(tn,{page:t,handleButtonClick:e})]})},fn=s.b.div(bn||(bn=Object(a.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  @media screen and (max-width: 576px) {\n    margin-top: 100px;\n  }\n"]))),mn=s.b.div(un||(un=Object(a.a)(["\n  text-align: center;\n  font-size: 40px;\n  color: #ff8100;\n"]))),gn=s.b.div(jn||(jn=Object(a.a)(["\n  text-align: center;\n  font-size: 16px;\n  margin: 20px 0;\n"]))),vn=s.b.form(ln||(ln=Object(a.a)(["\n  border: solid 1px #ff8100;\n  padding: 20px 40px 60px 40px;\n  width: 300px;\n  margin: 30px auto;\n  text-align: center;\n  font-size: 18px;\n"]))),wn=s.b.input(pn||(pn=Object(a.a)(["\n  width: 100%;\n  font-size: 16px;\n  padding: 5px;\n  margin: 16px 0;\n"]))),kn=s.b.div(hn||(hn=Object(a.a)(["\n  color: red;\n  margin-bottom: 12px;\n"]))),yn=s.b.button(xn||(xn=Object(a.a)(["\n  padding: 10px;\n  background: #ff8100;\n  color: white;\n  border: solid 1px #ff8100;\n  cursor: pointer;\n  float: right;\n  width: 100%;\n\n  &:hover {\n    background: #ff8100;\n  }\n\n  & + & {\n    margin-left: 5px;\n  }\n"])));function Sn(n){var e=n.state,t=n.handle,a=Object(b.g)();return Object(C.jsxs)(fn,{children:[Object(C.jsx)(mn,{children:"/register"===a.pathname?"Sign Up":"Login"}),Object(C.jsx)(gn,{children:"For testing, the password is set as default value 'Lidemy'."}),Object(C.jsxs)(vn,{onSubmit:t.handleSubmit,children:["/register"===a.pathname&&Object(C.jsxs)("div",{children:["Nickname",Object(C.jsx)(wn,{type:"text",value:e.nickname,onChange:t.handleNicknameInput})]}),Object(C.jsxs)("div",{children:["Username",Object(C.jsx)(wn,{type:"text",value:e.username,onChange:t.handleUsernameInput})]}),Object(C.jsxs)("div",{children:["Password",Object(C.jsx)(wn,{type:"password",value:e.password,onChange:t.handlePasswordInput})]}),Object(C.jsx)(kn,{children:e.errorMessage}),Object(C.jsx)(yn,{children:"submit"})]})]})}var Cn=Object(c.memo)(Sn);var In=function(){var n=Object(c.useContext)(u).setUser,e=Object(c.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(c.useState)(""),s=Object(o.a)(i,2),d=s[0],j=s[1],l=Object(c.useState)("Lidemy"),p=Object(o.a)(l,2),x=p[0],f=p[1],g=Object(c.useState)(),v=Object(o.a)(g,2),w=v[0],k=v[1],y=Object(c.useState)(!1),S=Object(o.a)(y,2),C=S[0],I=S[1],z=Object(b.f)(),B=Object(c.useCallback)((function(n){r(n.target.value)}),[]),P=Object(c.useCallback)((function(n){j(n.target.value)}),[]),L=Object(c.useCallback)((function(n){f(n.target.value)}),[]);return{nickname:a,username:d,password:x,errorMessage:w,handleSubmit:function(e){e.preventDefault(),k(null),C||(I(!0),function(n,e,t){return fetch("".concat(O,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:e,password:t})}).then((function(n){return n.json()}))}(a,d,x).then((function(e){if(I(!1),0===e.ok)return k(e.message);h(e.token),m().then((function(e){if(1!==e.ok)return h(null),k(e.message);n(e.data),z.push("/")}))})))},handleNicknameInput:B,handleUsernameInput:P,handlePasswordInput:L}};var zn=function(){var n=In(),e={nickname:n.nickname,username:n.username,password:n.password,errorMessage:n.errorMessage},t={handleSubmit:n.handleSubmit,handleNicknameInput:n.handleNicknameInput,handleUsernameInput:n.handleUsernameInput,handlePasswordInput:n.handlePasswordInput};return Object(C.jsx)(Cn,{state:e,handle:t})};var Bn,Pn,Ln,Mn,En=function(){var n=S(),e={username:n.username,password:n.password,errorMessage:n.errorMessage},t={handleSubmit:n.handleSubmit,handleUsernameInput:n.handleUsernameInput,handlePasswordInput:n.handlePasswordInput};return Object(C.jsx)(Cn,{state:e,handle:t})},Nn=t.p+"static/media/banner.50d2ec5c.jpeg",Tn=t.p+"static/media/logo.02bae6b4.jpeg",Un=s.b.div(Bn||(Bn=Object(a.a)(["\n  position: relative;\n  background-image: url(",");\n  background-repeat: no-repeat;\n  background-attachment: fixed;\n  background-position: center;\n  background-size: cover;\n  height: calc(100vh - 100px);\n  width: 90%;\n  margin: auto;\n\n  @media screen and (max-width: 576px) {\n    height: 100vh;\n    margin: 100px auto 60px auto;\n  }\n\n  @media screen and (max-width: 768px) {\n    margin: 100px auto 60px auto;\n  }\n"])),Nn),_n=s.b.div(Pn||(Pn=Object(a.a)(['\n  position: absolute;\n  max-width: 500px;\n  background: transparent;\n  top: 50%;\n  left: 40%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  font-family: "Playfair Display", serif;\n']))),Dn=s.b.div(Ln||(Ln=Object(a.a)(["\n  margin-top: 80px;\n  line-height: 2;\n  color: #440f00;\n  font-size: 20px;\n  text-align: center;\n\n  span {\n    font-weight: bold;\n  }\n\n  @media screen and (max-width: 576px) {\n    line-height: 1.5;\n    margin-top: 120px;\n  }\n"]))),An=s.b.img(Mn||(Mn=Object(a.a)(["\n  width: 120px;\n  height: 120px;\n  border-radius: 50%;\n  position: absolute;\n  top: 0%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  @media screen and (max-width: 576px) {\n    margin: 50px 0;\n  }\n"])));var Jn,$n,Fn,qn=function(){return Object(C.jsx)(Un,{children:Object(C.jsxs)(_n,{children:[Object(C.jsx)(An,{src:Tn}),Object(C.jsxs)(Dn,{children:[Object(C.jsx)("span",{children:"Orange & Black"})," ",Object(C.jsx)("br",{}),Object(C.jsx)("span",{children:"Optimistic & Brave"})," ",Object(C.jsx)("br",{}),Object(C.jsxs)("p",{children:["We love when inspiring people share their stories on our site."," ","Although sharing and listening to stories makes us stop and reflect, it can also lead to us thinking and acting differently."]})]})]})})},Hn=s.b.div(Jn||(Jn=Object(a.a)([""]))),Wn=s.b.div($n||($n=Object(a.a)(["\n  width: 60%;\n  margin: 30px auto;\n  max-height: 80vh;\n  overflow: scroll;\n  padding: 30px 0;\n\n  @media screen and (max-width: 768px) {\n    margin: 100px auto;\n    width: 80%;\n  }\n"]))),Gn=Object(s.b)(d.b)(Fn||(Fn=Object(a.a)(["\n  display: block;\n  width: 30%;\n  margin-bottom: 30px;\n  text-decoration: none;\n  text-align: center;\n  background: #ff8100;\n  color: white;\n  font-size: 18px;\n  padding: 12px;\n  border: solid 1px #ff8100;\n  cursor: pointer;\n\n  @media screen and (max-width: 576px) {\n    width: 60%;\n  }\n"])));var Kn=function(){var n=an().posts;return Object(C.jsx)(Hn,{children:Object(C.jsxs)(Wn,{children:[Object(C.jsx)(Gn,{to:"/new-post",children:"Add New Post"}),n.map((function(n){return Object(C.jsx)(X,{post:n},n.id)}))]})})};var Qn,Rn,Vn,Xn,Yn=function(){var n=Object(b.h)().id,e=Object(c.useContext)(u).user,t=Object(c.useState)(""),a=Object(o.a)(t,2),r=a[0],i=a[1],s=Object(c.useState)([]),d=Object(o.a)(s,2),j=d[0],l=d[1],p=Object(c.useState)(),h=Object(o.a)(p,2),x=h[0],f=h[1],m=Object(c.useState)(!1),g=Object(o.a)(m,2),v=g[0],w=g[1],k=Object(b.f)();Object(c.useEffect)((function(){(function(n){return fetch("".concat(O,"/posts/").concat(n,"/comments?_sort=createdAt&_order=desc")).then((function(n){return n.json()}))})(n).then((function(n){l(n)}))}),[n,j]);var y=Object(c.useCallback)((function(n){i(n.target.value)}),[]);return{comments:j,body:r,errorMessage:x,handleSubmit:function(t){if(e||k.push("/login"),t.preventDefault(),f(null),!v){w(!0);var a=e.nickname;if(""===r)return f('Invalid request, "body" is required');(function(n,e,t){return fetch("".concat(O,"/posts/").concat(n,"/comments"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:e,body:t})}).then((function(n){return n.json()}))})(n,a,r).then((function(){w(!1),i("")}))}},handleBodyInput:y}},Zn=s.b.form(Qn||(Qn=Object(a.a)(["\n  font-size: 20px;\n"]))),ne=s.b.textarea.attrs({placeholder:"Join the discussion..."})(Rn||(Rn=Object(a.a)(["\n  width: 100%;\n  font-size: 16px;\n  padding: 12px;\n"]))),ee=s.b.div(Vn||(Vn=Object(a.a)(["\n  color: red;\n  margin-bottom: 12px;\n"]))),te=s.b.button(Xn||(Xn=Object(a.a)(["\n  padding: 12px;\n  background: #ff8100;\n  color: white;\n  border: solid 1px #ff8100;\n  cursor: pointer;\n  float: right;\n\n  &:hover {\n    background: #ff8100;\n  }\n\n  & + & {\n    margin-left: 5px;\n  }\n"])));function ae(n){var e=n.state,t=n.handle;return Object(C.jsxs)(Zn,{onSubmit:t.handleSubmit,children:[Object(C.jsx)("div",{children:Object(C.jsx)(ne,{rows:"5",value:e.body,onChange:t.handleBodyInput})}),Object(C.jsx)(ee,{children:e.errorMessage}),Object(C.jsx)(te,{children:"submit"})]})}var ce,re,ie,oe,se,de,be,ue,je=Object(c.memo)(ae),le=s.b.div(ce||(ce=Object(a.a)(["\n  border: 1px solid #ff8100;\n  padding: 8px 16px;\n  border-radius: 8px;\n\n  & + & {\n    margin-top: 20px;\n  }\n"]))),pe=s.b.div(re||(re=Object(a.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  align-items: center;\n  padding-bottom: 10px;\n"]))),he=s.b.div(ie||(ie=Object(a.a)(["\n  font-size: 20px;\n\n  color: #ff8100;\n"]))),xe=s.b.div(oe||(oe=Object(a.a)(["\n  color: rgba(255, 255, 255, 0.5);\n"]))),Oe=s.b.div(se||(se=Object(a.a)(["\n  display: flex;\n  flex-wrap: wrap-reverse;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 18px;\n"]))),fe=s.b.div(de||(de=Object(a.a)(["\n  white-space: pre-line;\n  over-flow: hidden;\n  word-break: break-all;\n"]))),me=s.b.div(be||(be=Object(a.a)(["\n  text-align: right;\n  margin: 12px 0;\n"]))),ge=s.b.button(ue||(ue=Object(a.a)(["\n  padding: 8px 4px;\n  background: transparent;\n  color: white;\n  border: solid 1px #ff8100;\n  cursor: pointer;\n\n  &:hover {\n    background: #ff8100;\n  }\n\n  & + & {\n    margin-left: 5px;\n  }\n"])));function ve(n){var e=n.comment,t=Object(c.useContext)(u).user;return Object(C.jsxs)(le,{children:[Object(C.jsxs)(pe,{children:[Object(C.jsx)(he,{children:e.nickname}),Object(C.jsx)(xe,{children:new Date(e.createdAt).toLocaleString("en",{hour12:!1})})]}),Object(C.jsxs)(Oe,{children:[Object(C.jsx)(fe,{children:e.body}),t&&t.nickname===e.nickname&&Object(C.jsx)(me,{children:Object(C.jsx)(ge,{onClick:function(){var n;n=e.id,fetch("".concat(O,"/comments/").concat(n,"/"),{method:"DELETE"}).then((function(n){return n.json()}))},children:"Delete"})})]})]})}var we,ke,ye,Se,Ce,Ie,ze,Be,Pe,Le,Me=Object(c.memo)(ve),Ee=s.b.div(we||(we=Object(a.a)([""]))),Ne=s.b.div(ke||(ke=Object(a.a)(["\n  width: 50%;\n  margin: 100px auto;\n\n  @media screen and (max-width: 768px) {\n    width: 80%;\n  }\n"]))),Te=s.b.div(ye||(ye=Object(a.a)(["\n  border-bottom: 1px solid #ff8100;\n  text-align: left;\n"]))),Ue=s.b.div(Se||(Se=Object(a.a)(["\n  font-size: 28px;\n  white-space: pre-wrap;\n  word-break: break-all;\n  color: #ff8100;\n"]))),_e=s.b.div(Ce||(Ce=Object(a.a)(["\n  margin-top: 12px;\n"]))),De=s.b.div(Ie||(Ie=Object(a.a)(["\n  font-size: 18px;\n  margin-top: 30px;\n  max-height: 60vh;\n  white-space: pre-line;\n  overflow: scroll;\n  word-break: break-all;\n"]))),Ae=s.b.button(ze||(ze=Object(a.a)(["\n  padding: 12px;\n  margin-top: 20px;\n  background: #ff8100;\n  color: white;\n  border: solid 1px #ff8100;\n  cursor: pointer;\n  float: right;\n"]))),Je=s.b.div(Be||(Be=Object(a.a)(["\n  margin: 150px 0 80px 0;\n  border-top: 1px solid #ff8100;\n"]))),$e=s.b.h1(Pe||(Pe=Object(a.a)([""]))),Fe=s.b.div(Le||(Le=Object(a.a)(["\n  margin-top: 100px;\n"])));var qe=function(){var n=an().post,e=Object(b.f)(),t=Object(c.useContext)(u).user,a=Yn(),r=a.comments,i={comments:r,body:a.body,errorMessage:a.errorMessage},o={handleSubmit:a.handleSubmit,handleBodyInput:a.handleBodyInput};return Object(C.jsx)(Ee,{children:Object(C.jsxs)(Ne,{children:[Object(C.jsxs)(Te,{children:[Object(C.jsx)(Ue,{children:n.title}),Object(C.jsx)(_e,{children:new Date(n.createdAt).toLocaleString("en",{hour12:!1})})]}),Object(C.jsx)(De,{children:n.body}),Object(C.jsx)(Ae,{onClick:function(){e.goBack()},children:"Back"}),Object(C.jsxs)(Je,{children:[Object(C.jsx)($e,{children:"Comments"}),!t&&"Please login to comment",t&&Object(C.jsx)(je,{state:i,handle:o}),Object(C.jsx)(Fe,{children:r.map((function(n){return Object(C.jsx)(Me,{comment:n},n.id)}))})]})]})})};var He,We,Ge,Ke,Qe,Re=function(){var n=Object(c.useContext)(u).user,e=Object(c.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(c.useState)(""),s=Object(o.a)(i,2),d=s[0],j=s[1],l=Object(c.useState)(),p=Object(o.a)(l,2),h=p[0],f=p[1],m=Object(c.useState)(!1),g=Object(o.a)(m,2),v=g[0],w=g[1],k=Object(b.f)();Object(c.useEffect)((function(){n||k.push("/")}),[k,n]);var y=Object(c.useCallback)((function(n){r(n.target.value)}),[]),S=Object(c.useCallback)((function(n){j(n.target.value)}),[]);return{title:a,body:d,errorMessage:h,handleSubmit:function(n){n.preventDefault(),f(null),v||(w(!0),function(n,e){var t=x();return fetch("".concat(O,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(t)},body:JSON.stringify({title:n,body:e})}).then((function(n){return n.json()}))}(a,d).then((function(n){if(w(!1),0===n.ok)return f(n.message);k.push("/")})))},handleTitleInput:y,handleBodyInput:S}},Ve=s.b.form(He||(He=Object(a.a)(["\n  border: solid 3px #ff8100;\n  padding: 20px 40px 60px 40px;\n  max-width: 600px;\n  margin: 30px auto;\n  font-size: 20px;\n\n  @media screen and (max-width: 768px) {\n    margin: 100px auto;\n    overflow: hidden;\n  }\n"]))),Xe=s.b.input(We||(We=Object(a.a)(["\n  margin-bottom: 12px;\n  width: 100%;\n  font-size: 16px;\n  padding: 10px;\n"]))),Ye=s.b.textarea(Ge||(Ge=Object(a.a)(["\n  width: 100%;\n  font-size: 16px;\n  padding: 12px;\n"]))),Ze=s.b.div(Ke||(Ke=Object(a.a)(["\n  color: red;\n  margin-bottom: 12px;\n"]))),nt=s.b.button(Qe||(Qe=Object(a.a)(["\n  padding: 12px;\n  background: #ff8100;\n  color: white;\n  border: solid 1px #ff8100;\n  cursor: pointer;\n  float: right;\n\n  &:hover {\n    background: #ff8100;\n  }\n\n  & + & {\n    margin-left: 5px;\n  }\n"])));function et(n){var e=n.state,t=n.handle;return Object(C.jsxs)(Ve,{onSubmit:t.handleSubmit,children:[Object(C.jsxs)("div",{children:["Title:"," ",Object(C.jsx)(Xe,{type:"text",value:e.title,onChange:t.handleTitleInput})]}),Object(C.jsxs)("div",{children:["Content:"," ",Object(C.jsx)(Ye,{rows:"20",value:e.body,onChange:t.handleBodyInput})]}),Object(C.jsx)(Ze,{children:e.errorMessage}),Object(C.jsx)(nt,{children:"submit"})]})}var tt=Object(c.memo)(et);var at=function(){var n=Re(),e={title:n.title,body:n.body,errorMessage:n.errorMessage},t={handleSubmit:n.handleSubmit,handleTitleInput:n.handleTitleInput,handleBodyInput:n.handleBodyInput};return Object(C.jsx)(tt,{state:e,handle:t})};var ct=function(){var n=Object(b.h)().id,e=Object(c.useContext)(u).user,t=Object(c.useState)(""),a=Object(o.a)(t,2),r=a[0],i=a[1],s=Object(c.useState)(""),d=Object(o.a)(s,2),j=d[0],l=d[1],p=Object(c.useState)(),h=Object(o.a)(p,2),m=h[0],g=h[1],v=Object(c.useState)(!1),w=Object(o.a)(v,2),k=w[0],y=w[1],S=Object(b.f)();Object(c.useEffect)((function(){e||S.push("/"),f(n).then((function(n){i(n.title),l(n.body)}))}),[n,S,e]);var C=Object(c.useCallback)((function(n){i(n.target.value)}),[]),I=Object(c.useCallback)((function(n){l(n.target.value)}),[]);return{title:r,body:j,errorMessage:m,handleSubmit:function(e){e.preventDefault(),g(null),k||(y(!0),function(n,e,t){var a=x();return fetch("".concat(O,"/posts/").concat(n),{method:"PATCH",headers:{"content-type":"application/json",authorization:"Bearer ".concat(a)},body:JSON.stringify({title:e,body:t})}).then((function(n){return n.json()}))}(n,r,j).then((function(n){if(y(!1),0===n.ok)return g(n.message);S.push("/admin")})))},handleTitleInput:C,handleBodyInput:I}};var rt,it,ot,st=function(){var n=ct(),e={title:n.title,body:n.body,errorMessage:n.errorMessage},t={handleSubmit:n.handleSubmit,handleTitleInput:n.handleTitleInput,handleBodyInput:n.handleBodyInput};return Object(C.jsx)(tt,{state:e,handle:t})},dt=s.b.div(rt||(rt=Object(a.a)([""]))),bt=s.b.div(it||(it=Object(a.a)(["\n  width: 60%;\n  margin: 30px auto;\n  max-height: 80vh;\n  overflow: scroll;\n\n  @media screen and (max-width: 768px) {\n    width: 80%;\n  }\n"]))),ut=s.b.div(ot||(ot=Object(a.a)(["\n  text-align: center;\n  font-size: 28px;\n  margin: 50px 0;\n\n  span {\n    font-weight: bold;\n    color: #ff8100;\n  }\n\n  @media screen and (max-width: 768px) {\n    margin: 100px 0 50px 0;\n  }\n"])));var jt,lt=function(){var n=an(),e=n.posts,t=n.author;return Object(C.jsxs)(dt,{children:[Object(C.jsxs)(ut,{children:[Object(C.jsx)("span",{children:t})," \u7684\u6240\u6709\u6587\u7ae0"]}),Object(C.jsx)(bt,{children:e.map((function(n){return Object(C.jsx)(X,{post:n},n.id)}))})]})},pt=s.b.div(jt||(jt=Object(a.a)(["\n  padding-top: 64px;\n"])));var ht,xt,Ot=function(){var n=Object(c.useState)(null),e=Object(o.a)(n,2),t=e[0],a=e[1],r=Object(c.useState)(!0),i=Object(o.a)(r,2),s=i[0],p=i[1],h=Object(c.useState)(1),O=Object(o.a)(h,2),f=O[0],g=O[1];return Object(c.useEffect)((function(){x()?m().then((function(n){p(!1),n.ok&&a(n.data)})):p(!1)}),[]),Object(C.jsx)(u.Provider,{value:{user:t,setUser:a},children:Object(C.jsx)(j.Provider,{value:{isLoading:s,setIsLoading:p},children:Object(C.jsx)(l.Provider,{value:{page:f,setPage:g},children:Object(C.jsx)(pt,{children:Object(C.jsxs)(d.a,{children:[Object(C.jsx)(A,{}),Object(C.jsxs)(b.c,{children:[Object(C.jsx)(b.a,{exact:!0,path:"/",children:Object(C.jsx)(On,{})}),Object(C.jsx)(b.a,{exact:!0,path:"/register",children:Object(C.jsx)(zn,{})}),Object(C.jsx)(b.a,{path:"/login",children:Object(C.jsx)(En,{})}),Object(C.jsx)(b.a,{path:"/post/:id",children:Object(C.jsx)(qe,{})}),Object(C.jsx)(b.a,{path:"/new-post",children:Object(C.jsx)(at,{})}),Object(C.jsx)(b.a,{path:"/edit-post/:id",children:Object(C.jsx)(st,{})}),Object(C.jsx)(b.a,{path:"/about",children:Object(C.jsx)(qn,{})}),Object(C.jsx)(b.a,{path:"/admin",children:Object(C.jsx)(Kn,{})}),Object(C.jsx)(b.a,{path:"/author/:id",children:Object(C.jsx)(lt,{})})]})]})})})})})},ft=s.b.div(ht||(ht=Object(a.a)([""]))),mt=Object(s.a)(xt||(xt=Object(a.a)(['\n  body {\n    font-family:  "Ubuntu", sans-serif;\n    background: black;\n    color: white;\n  }\n\n  * {\n    box-sizing: border-box;\n  }\n'])));i.a.render(Object(C.jsxs)(ft,{children:[Object(C.jsx)(mt,{}),Object(C.jsx)(Ot,{})]}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.f14f943a.chunk.js.map